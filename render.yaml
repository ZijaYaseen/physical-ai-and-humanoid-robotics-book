services:
  - type: web
    name: physical-ai-rag-backend
    env: python
    region: frankfurt  # Choose your preferred region (frankfurt, oregon, ohio)
    buildCommand: |
      cd backend && pip install -r requirements.txt
    startCommand: cd backend && uvicorn main:app --host 0.0.0.0 --port $PORT
    envVars:
      # Gemini API Configuration
      - key: GEMINI_KEY
        sync: false  # Add your actual Gemini API key in Render dashboard
      - key: OPENAI_BASE_URL
        value: https://generativelanguage.googleapis.com/v1beta/openai

      # Qdrant Vector Database Configuration
      - key: QDRANT_URL
        sync: false  # Add your Qdrant URL in Render dashboard
      - key: QDRANT_API_KEY
        sync: false  # Add your Qdrant API key in Render dashboard

      # Neon Postgres Database Configuration
      - key: NEON_DB_HOST
        sync: false  # Add your Neon DB host in Render dashboard
      - key: NEON_DB_PORT
        value: "5432"
      - key: NEON_DB_NAME
        value: neondb
      - key: NEON_DB_USER
        sync: false  # Add your Neon DB user in Render dashboard
      - key: NEON_DB_PASSWORD
        sync: false  # Add your Neon DB password in Render dashboard
      - key: NEON_DATABASE_URL
        sync: false  # Add your full Neon DB URL in Render dashboard

      # Model Configuration
      - key: EMBEDDING_MODEL
        value: text-embedding-004
      - key: CHAT_MODEL
        value: gemini-2.5-flash

      # Application Configuration
      - key: TOP_K
        value: 5
      - key: DEFAULT_MODE
        value: augment
      - key: DOCS_DIR
        value: docs
      - key: ENV_REUSABLE_INTEL
        value: "false"

      # Better Auth Configuration
      - key: BETTER_AUTH_SECRET
        sync: false  # Generate a secure secret for production
      - key: BETTER_AUTH_URL
        sync: false  # Set to your frontend URL (e.g., https://your-frontend.onrender.com)

      # OAuth Provider Configuration - Google
      - key: GOOGLE_CLIENT_ID
        sync: false  # Add your Google OAuth client ID
      - key: GOOGLE_CLIENT_SECRET
        sync: false  # Add your Google OAuth client secret

      # OAuth Provider Configuration - GitHub
      - key: GITHUB_CLIENT_ID
        sync: false  # Add your GitHub OAuth client ID
      - key: GITHUB_CLIENT_SECRET
        sync: false  # Add your GitHub OAuth client secret

      # Session Configuration
      - key: SESSION_EXPIRES_IN_DAYS
        value: 30

      # Python version
      - key: PYTHON_VERSION
        value: 3.13